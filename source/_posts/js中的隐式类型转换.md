---
title: js中的隐式类型转换
date: 2018-03-27 15:26:01
tags:
---

### 本文通过几个示例来解释

#### 1. ++[[]][+[]]+[+[]] == 10
  这里面有多种操作符，根据优先级我们可以对左边表达式一步步划分，具体表达式的值在后面分析:
	
	++[[]][+[]]+[+[]]
	该表达式中最高优先级操作符为一元+， 所以优选处理的表达式为： +[] = 0;
	所以转化后为：
	
	++[[]][0]  +  [0]
	目前该表达式中最高优先级操作符为下标中括号， 所以进一步处理的表达式为: [[]][0] = []
	转化后为:
	++[] + [0]
	
	该表达式中最高优先级操作符为一元操作符 ++， 所以进一步处理的表达式为： ++[] = 1
	转化后为：
    1 + [0] = 1 + '0' = '10'
	
	整个表达式最后转化为:
	'10' == 10  true
	<!-- more -->
##### 以上转化涉及到这几个知识点，我们一一来揭开:

###### 1) +[] 涉及到的操作符为一元+
+ [].valueOf() // 返回数组自身，不是原始数据
+ 调用 [].toString() // 返回空字符串
+ Number("")// 空字符串转型为数字，返回0

###### 2) ++[] 涉及到的操作符为一元++
   上面这个表达式如果在console里面直接输出是会报错的, 需要做一个引用替换，

   var ref = [];
   ++ref
   
![console执行结果图](/images/1.jpg)

我们看下es5的文档是这么定义的：

   ![es5文档](/images/2.jpg)
   
	++[] 等价于
	1 + ToNumber(GetValue([])) = 1 + 0 = 1

###### 3) 1 + [0] = 1 + ‘0’ = ‘10’ 涉及到的 + 操作符
+ [0].valueOf() //[0] 返回数组自身，不是原始数据
+ 调用 [0].toString() // 返回字符串 '0'
	
